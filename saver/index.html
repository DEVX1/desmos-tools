<!DOCTYPE HTML>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge">
		<title>Desmos Saver</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="theme-color" content="#222">
		
		<!--Fonts-->
		<link rel="stylesheet" href="https://cdn.webfont.youziku.com/webfonts/nomal/99147/47019/58b404a8f629d8136c500201.css">
		<link rel="stylesheet" href="https://cdn.webfont.youziku.com/webfonts/nomal/99147/29785/58bae6b1f629d8128cc4b8d8.css">
		<link rel="stylesheet" href="../assets/css/fonts.css">
		
		<!--jQuery local
		<script src="../assets/js/jquery-3.1.1.min.js"></script>
		-->
		
		<!--jQuery CDN-->
		<script src="https://cdn.bootcss.com/jquery/3.1.1/jquery.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
		
		<!--tether JS CDN-->
		<script src="https://cdn.bootcss.com/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
		
		<!--Bootstrap CSS CDN-->
		<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
		
		<!--Bootstrap JS CDN-->
		<script src="https://cdn.bootcss.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
		
		<!--desmos API-->
		<script src="https://www.desmos.com/api/v0.8/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
		
		<!--desmos API local
		<script src="../assets/js/calculator.js"></script>
		-->
		<!--CodeMirror local
		<link rel="stylesheet" href="../assets/codemirror/lib/codemirror.css">
		<script src="../assets/codemirror/lib/codemirror.js"></script>
		<script src="../assets/codemirror/mode/javascript/javascript.js"></script>
		-->
		
		<!--CodeMirror CDN-->
		<link rel="stylesheet" href="https://cdn.bootcss.com/codemirror/5.24.2/codemirror.min.css">
		<script src="https://cdn.bootcss.com/codemirror/5.24.2/codemirror.min.js"></script>
		<script src="https://cdn.bootcss.com/codemirror/5.24.2/mode/javascript/javascript.min.js"></script>
		
		<link rel="stylesheet" href="../assets/css/main.css">
		<link rel="stylesheet" href="./stylesheet.css">
	</head>
	<body>
		<header>
			<div class="title-container">
				<span class="logo">desmos</span>
				<span class="title">Saver</span>
			</div>
			<div class="btn-container">
				<span class="icon get-btn">
					<i class="glyphicon glyphicon-save"></i>
				</span>
				<span class="icon set-btn">
					<i class="glyphicon glyphicon-open"></i>
				</span>
				<span class="icon lang-btn">
					<i class="glyphicon glyphicon-globe"></i>
				</span>
			</div>
		</header>
		
		<div id="calculator"></div>
		
		<textarea id="print-box" spellcheck="false"></textarea>
		
		<script>
			var state;
			var stateString;
			
			var elt = document.getElementById('calculator');
			var calculator = Desmos.GraphingCalculator(elt, {border: false});
			calculator.setExpression({id: 'graph1', latex: 'y=x^2'});
			
			var box = document.getElementById('print-box');
			var editor = CodeMirror.fromTextArea(box, {
				mode: 'text/javascript',
				lineWrapping: true,
				inputStyle: 'textarea'
			});
			
			$('.get-btn').click(function(){
				state = calculator.getState();
				stateString = JSON.stringify(state);
				editor.setValue(stateString);
			});
			
			$('.set-btn').click(function(){
				stateString = editor.getValue();
				state = JSON.parse(stateString);
				calculator.setState(state);
			});
		</script>	
	</body>
</html>
